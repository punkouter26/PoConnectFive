/* Mobile-First Responsive Styles for PoConnectFive */

/* ============================================
   CSS Variables for Mobile Optimization
   ============================================ */
:root {
    --touch-target-min: 44px;
    --mobile-padding: 1rem;
    --mobile-gap: 0.75rem;
    --header-height-mobile: 60px;
    --nav-width-mobile: 280px;
}

/* ============================================
   Mobile Portrait (< 576px)
   ============================================ */
@media (max-width: 575.98px) {

    /* Prevent zoom on double-tap */
    * {
        touch-action: manipulation;
    }

    /* Body and Layout */
    body {
        -webkit-text-size-adjust: 100%;
        -webkit-font-smoothing: antialiased;
    }

    .page {
        padding: var(--mobile-padding);
    }

    /* Header */
    .top-row {
        height: var(--header-height-mobile);
        padding: 0.5rem 1rem;
    }

    /* Navigation - Hamburger Menu */
    .navbar-toggler {
        display: block !important;
        min-width: var(--touch-target-min);
        min-height: var(--touch-target-min);
        padding: 0.5rem;
        border: none;
        background: transparent;
        cursor: pointer;
    }

    .sidebar {
        position: fixed;
        top: 0;
        left: -100%;
        width: var(--nav-width-mobile);
        height: 100vh;
        background: var(--background-color, #f8f9fa);
        transition: left 0.3s ease;
        z-index: 1000;
        box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
    }

    .sidebar.show {
        left: 0;
    }

    .sidebar-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 999;
        display: none;
    }

    .sidebar-overlay.show {
        display: block;
    }

    /* Game Board - Full Width Mobile */
    .game-container {
        width: 100%;
        max-width: 100vw;
        padding: 0;
        margin: 0;
    }

    .game-board-container {
        width: 100% !important;
        max-width: 100vw !important;
        margin: 0 !important;
        padding: 0.5rem !important;
        overflow: visible;
    }

    .game-board {
        width: 100% !important;
        max-width: calc(100vw - 1rem) !important;
        margin: 0 auto !important;
        padding: 0.5rem !important;
    }

    .game-board canvas {
        max-width: 100% !important;
        height: auto !important;
        width: 100% !important;
        display: block;
    }

    .game-board table {
        width: 100%;
        table-layout: fixed;
    }

    .cell {
        min-width: var(--touch-target-min);
        min-height: var(--touch-target-min);
        padding: 0;
        position: relative;
    }

    /* Touch feedback */
    .cell:active {
        transform: scale(0.95);
        transition: transform 0.1s ease;
    }

    /* Game Info - Vertical Stack */
    .game-info {
        flex-direction: column;
        gap: var(--mobile-gap);
        padding: var(--mobile-padding);
    }

    .game-status,
    .game-controls {
        width: 100%;
        text-align: center;
    }

    /* Buttons - Touch-friendly on Mobile */
    .btn,
    .rz-button {
        min-width: var(--touch-target-min);
        min-height: var(--touch-target-min);
        padding: 0.75rem 1rem;
        font-size: 0.95rem;
        touch-action: manipulation;
    }

    /* Game controls section - horizontal on mobile when space allows */
    .game-controls-section {
        width: 100%;
        justify-content: center;
    }

    .game-controls-section .rz-button {
        flex: 1;
        min-width: 80px;
        max-width: 150px;
    }

    .btn-group {
        flex-direction: column;
        width: 100%;
    }

    .btn-group .btn {
        border-radius: 0.375rem !important;
        margin: 0.25rem 0;
    }

    /* Cards - Full Width */
    .rz-card,
    .card {
        width: 100%;
        margin: 0.5rem 0;
    }

    /* Index Page - Vertical Card Layout */
    .rz-row {
        flex-direction: column;
    }

    .rz-col-12,
    .rz-col-md-6,
    .rz-col-lg-4 {
        width: 100%;
        margin: 0.5rem 0;
    }

    /* Leaderboard - Mobile Optimized */
    .leaderboard-container {
        padding: var(--mobile-padding);
    }

    .rz-datatable {
        font-size: 0.875rem;
    }

    .rz-datatable th,
    .rz-datatable td {
        padding: 0.5rem;
    }

    /* Hide less important columns on mobile */
    .rz-datatable .hide-mobile {
        display: none;
    }

    /* Statistics - Stack Vertically */
    .stats-grid {
        grid-template-columns: 1fr;
        gap: var(--mobile-gap);
    }

    /* Diagnostics Modal - Full Screen on Mobile */
    .rz-dialog-content {
        max-height: 80vh;
        overflow-y: auto;
    }

    /* Win Probability - Compact */
    .win-probability {
        font-size: 0.875rem;
        padding: 0.5rem;
    }

    /* Typography - Responsive Sizing */
    h1 {
        font-size: 1.75rem;
    }

    h2 {
        font-size: 1.5rem;
    }

    h3 {
        font-size: 1.25rem;
    }

    /* Reduce padding everywhere */
    .rz-stack {
        gap: var(--mobile-gap) !important;
    }

    /* Radzen card adjustments for mobile */
    .rz-card {
        padding: 0.75rem !important;
    }

    .rz-card .rz-stack {
        gap: 0.5rem !important;
    }

    /* Radzen text sizing for mobile */
    .rz-text-h6 {
        font-size: 1.1rem !important;
    }

    .rz-text-body2 {
        font-size: 0.85rem !important;
    }

    .rz-text-subtitle1 {
        font-size: 0.95rem !important;
    }

    .rz-text-caption {
        font-size: 0.75rem !important;
    }

    /* Bottom Navigation (iOS/Android style) */
    .bottom-nav {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        height: 60px;
        background: var(--background-color, white);
        border-top: 1px solid var(--border-color, #dee2e6);
        display: flex;
        justify-content: space-around;
        align-items: center;
        z-index: 100;
        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
    }

    .bottom-nav-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-width: var(--touch-target-min);
        min-height: var(--touch-target-min);
        color: var(--text-color, #212529);
        text-decoration: none;
        font-size: 0.75rem;
    }

    .bottom-nav-item:active {
        transform: scale(0.9);
    }

    .bottom-nav-item .icon {
        font-size: 1.5rem;
        margin-bottom: 0.25rem;
    }

    /* Add bottom padding to content to prevent overlap with bottom nav */
    .main {
        padding-bottom: 80px;
    }

    /* Loading States - Mobile Friendly */
    .loading-skeleton {
        height: 60px;
        margin: 0.5rem 0;
        border-radius: 0.375rem;
    }
}

/* ============================================
   Small Tablet Portrait (576px - 767.98px)
   ============================================ */
@media (min-width: 576px) and (max-width: 767.98px) {
    .game-board {
        width: 90vw;
        max-width: 500px;
    }

    .cell {
        min-width: 48px;
        min-height: 48px;
    }

    .btn {
        width: auto;
        min-width: 120px;
    }

    /* Two column layout for cards */
    .rz-row {
        flex-direction: row;
        flex-wrap: wrap;
    }

    .rz-col-md-6 {
        width: calc(50% - 1rem);
        margin: 0.5rem;
    }
}

/* ============================================
   Tablet Landscape (768px - 991.98px)
   ============================================ */
@media (min-width: 768px) and (max-width: 991.98px) {
    .game-board {
        width: 70vw;
        max-width: 600px;
    }

    .navbar-toggler {
        display: none !important;
    }

    .sidebar {
        position: static;
        width: 200px;
        height: auto;
        box-shadow: none;
    }

    .bottom-nav {
        display: none;
    }

    .main {
        padding-bottom: 0;
    }
}

/* ============================================
   Touch Enhancements (All Screens)
   ============================================ */
@media (hover: none) and (pointer: coarse) {
    /* Touch device specific styles */

    /* Larger tap targets */
    a,
    button,
    input,
    select,
    textarea {
        min-height: var(--touch-target-min);
    }

    /* Remove hover effects on touch devices */
    .cell:hover {
        transform: none;
    }

    /* Add touch ripple effect */
    .touch-ripple {
        position: relative;
        overflow: hidden;
    }

    .touch-ripple::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.5);
        transform: translate(-50%, -50%);
        transition: width 0.3s ease, height 0.3s ease;
    }

    .touch-ripple:active::after {
        width: 200px;
        height: 200px;
    }
}

/* ============================================
   Landscape Mode Adjustments (Mobile)
   ============================================ */
@media (max-width: 767.98px) and (orientation: landscape) {
    .game-board {
        width: 50vh;
        height: 50vh;
    }

    .game-info {
        flex-direction: row;
        justify-content: space-between;
    }

    .bottom-nav {
        height: 50px;
    }

    h1 {
        font-size: 1.5rem;
    }

    .main {
        padding-bottom: 60px;
    }
}

/* ============================================
   Dark Mode Mobile Adjustments
   ============================================ */
@media (max-width: 575.98px) {
    [data-theme="dark"] .sidebar {
        background: #1a1a1a;
    }

    [data-theme="dark"] .bottom-nav {
        background: #1a1a1a;
        border-top-color: #333;
    }

    [data-theme="dark"] .sidebar-overlay {
        background: rgba(0, 0, 0, 0.8);
    }
}

/* ============================================
   Accessibility - High Contrast Mobile
   ============================================ */
@media (max-width: 575.98px) {
    [data-theme="high-contrast"] .cell {
        border: 2px solid #000;
    }

    [data-theme="high-contrast"] .btn,
    [data-theme="high-contrast"] .rz-button {
        border: 2px solid #000;
    }
}

/* ============================================
   Performance Optimizations
   ============================================ */
@media (max-width: 575.98px) {
    /* Reduce animations on low-end devices */
    @media (prefers-reduced-motion: reduce) {
        * {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
        }
    }

    /* GPU acceleration for smooth scrolling */
    .game-board,
    .sidebar,
    .bottom-nav {
        transform: translateZ(0);
        will-change: transform;
    }
}

/* ============================================
   Safe Area Insets (iPhone X+, Android with notch)
   ============================================ */
@supports (padding: max(0px)) {
    .top-row {
        padding-left: max(1rem, env(safe-area-inset-left));
        padding-right: max(1rem, env(safe-area-inset-right));
        padding-top: max(0.5rem, env(safe-area-inset-top));
    }

    .bottom-nav {
        padding-bottom: max(0px, env(safe-area-inset-bottom));
        padding-left: max(0px, env(safe-area-inset-left));
        padding-right: max(0px, env(safe-area-inset-right));
    }
}

/* ============================================
   Print Styles (Hide mobile-specific UI)
   ============================================ */
@media print {

    .navbar-toggler,
    .sidebar,
    .bottom-nav,
    .sidebar-overlay {
        display: none !important;
    }
}